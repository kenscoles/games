import{c as I}from"./chunk-NZRO3BFI.js";import"./chunk-VN3CQEPZ.js";import{b as F,c as k}from"./chunk-HOFRFDUX.js";import{g as A,h as P,i as O,k as L,l as $,m as j,n as N,o as R}from"./chunk-46BGSHF4.js";import{$ as f,$a as E,Aa as l,Ka as M,Qb as T,Qc as V,W as d,Za as u,_a as g,aa as y,ab as _,bb as h,cb as x,db as n,eb as a,fb as w,gb as C,ib as S,jb as m,ka as p,tb as b,xb as o,ya as D,yb as s}from"./chunk-YXBEA4Z2.js";var z=(i,t)=>t.code;function H(i,t){if(i&1&&(n(0,"mat-option",4),o(1),a()),i&2){let e=t.$implicit;x("value",e),l(),s(e)}}function q(i,t){i&1&&(n(0,"th"),o(1,"Region"),a())}function G(i,t){if(i&1&&(n(0,"td"),o(1),a()),i&2){let e=m().$implicit;l(),s(e.region)}}function J(i,t){if(i&1){let e=C();n(0,"tr")(1,"td"),o(2),a(),n(3,"td"),o(4),a(),n(5,"td"),o(6),a(),u(7,G,2,1,"td"),n(8,"td",6),S("click",function(){let c=f(e).$implicit,v=m(2);return y(v.collectData(c))}),w(9,"img",7),a()()}if(i&2){let e=t.$implicit,r=m(2),c=e.flag+"?a="+r.myDate;l(2),s(e.name),l(2),s(e.code),l(2),s(e.capital),l(),g(r.selection()==="All"?7:-1),l(2),x("src",c,D)}}function K(i,t){if(i&1&&(n(0,"table",5)(1,"caption")(2,"h3"),o(3,"List of country data"),a()(),n(4,"thead")(5,"tr")(6,"th"),o(7,"Name"),a(),n(8,"th"),o(9,"Code"),a(),n(10,"th"),o(11,"Capital"),a(),u(12,q,2,0,"th"),n(13,"th"),o(14,"Flag"),a()()(),n(15,"tbody"),_(16,J,10,5,"tr",null,z),a()()),i&2){let e=m();l(12),g(e.selection()==="All"?12:-1),l(4),h(e.myCountryData())}}function Q(i,t){i&1&&(n(0,"h3"),o(1,"Please wait..."),a())}var B=class i{util=d(R);router=d(I);state=d(k);selection=p("All");myCountryData=p("");countryData=p("");result=[];regions=[];codes=F(()=>"https://restcountries.com/v3.1/all?fields=name,cca3,capital,flags,region");isDataLoaded=!1;myDate=Date.now();constructor(){T(()=>{this.codes.hasValue()&&(this.isDataLoaded||(this.result=this.codes.value().map(t=>({code:t.cca3,name:t.name.common,region:t.region,capital:t.capital[0],flag:t.flags.svg})),this.countryData.set(this.result),this.selection()==="All"&&this.myCountryData.set(this.countryData()),this.util.objsort(this.countryData(),"name","asc"),this.regions=Array.from(new Set(this.codes.value().map(t=>t.region))),this.regions.unshift("All"),console.log("regions",this.regions),console.log("countryData",this.countryData()),this.isDataLoaded=!0))})}onSelected(t){this.selection.set(t),this.selection()==="All"?this.myCountryData.set(this.countryData()):this.myCountryData.set(this.countryData().filter(e=>e.region==this.selection()))}collectData(t){console.log("Data ",t),this.state.myCountry.set(t.code),this.router.navigate(["country"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-styles"]],decls:11,vars:1,consts:[["reg",""],[2,"width","10%","text-align","justify","margin-right","auto","margin-left","auto"],["appearance","fill"],[3,"valueChange"],[3,"value"],[2,"width","40%","text-align","justify","margin-right","auto","margin-left","auto"],[3,"click"],[3,"src"]],template:function(e,r){if(e&1){let c=C();n(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),o(3,"region"),a(),n(4,"mat-select",3,0),S("valueChange",function(){f(c);let U=b(5);return y(r.onSelected(U.value))}),_(6,H,2,2,"mat-option",4,E),a()()(),n(8,"p"),u(9,K,18,1,"table",5)(10,Q,2,0,"h3"),a()}e&2&&(l(6),h(r.regions),l(3),g(r.codes.hasValue()?9:10))},dependencies:[V,O,P,A,L,N,j,$],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}img[_ngcontent-%COMP%]{border:2px solid;width:20%;display:block;margin:5px auto}@media screen and (max-width: 585px){img[_ngcontent-%COMP%]{border:1px solid;margin:2px;width:100%}}"],changeDetection:0})};export{B as Styles};
