import{a as U}from"./chunk-TP7ZV2PG.js";import{c as I}from"./chunk-2JGGQEA6.js";import{a as H}from"./chunk-U72QHV4Z.js";import{c as W}from"./chunk-K3QGD327.js";import{a as L,b as T,c as V,d as F,e as O,f as k,g as N,h as j,i as R,l as B,m as $,n as A}from"./chunk-LNIN4MSK.js";import{$ as _,$a as b,Ia as y,Mb as w,Nb as D,Nc as E,Oc as P,V as l,Xa as d,Ya as m,_ as g,ab as S,bb as v,cb as n,db as o,eb as u,fb as C,hb as x,ia as h,ib as s,wb as a,xb as M,ya as r}from"./chunk-3Z65R7ZE.js";var z=(i,e)=>e.code;function G(i,e){if(i&1){let t=C();n(0,"tr")(1,"td"),a(2),o(),n(3,"td")(4,"button",4),x("click",function(){let p=g(t).$implicit,f=s(3);return _(f.collectData(p))}),a(5,"view"),o()(),n(6,"td"),a(7),o()()}if(i&2){let t=e.$implicit;r(2),M(t.name),r(5),M(t.region)}}function J(i,e){if(i&1&&(n(0,"table",3)(1,"caption")(2,"h3"),a(3,"List of country data"),o()(),n(4,"thead")(5,"tr")(6,"th"),a(7,"Name"),o(),u(8,"th"),n(9,"th"),a(10,"Region"),o()()(),n(11,"tbody"),b(12,G,8,2,"tr",null,z),o()()),i&2){let t=s(2);r(12),S(t.filtered())}}function K(i,e){i&1&&(n(0,"h3"),a(1,"Please wait..."),o())}function Q(i,e){if(i&1){let t=C();n(0,"div",0),u(1,"div"),n(2,"mat-form-field",1)(3,"mat-label"),a(4,"Search"),o(),n(5,"input",2),x("ngModelChange",function(p){g(t);let f=s();return _(f.searchInput.set(p))}),o()()(),n(6,"p"),d(7,J,14,0,"table",3)(8,K,2,0,"h3"),o()}if(i&2){let t=s();r(5),v("ngModel",t.searchInput()),r(2),m(t.codes.hasValue()&&t.filtered()!==""?7:8)}}function X(i,e){i&1&&u(0,"app-country")}var q=class i{#t=l($);router=l(I);state=l(W);#e=l(H);countryData=h("");codes=this.#e.codes;isDataLoaded=!1;searchInput=h("");debounced=A(this.searchInput,1e3);filtered=D(()=>this.countryData().filter(e=>e.name.toLowerCase().includes(this.debounced().toLowerCase())||e.region.toLowerCase().includes(this.debounced().toLowerCase())));constructor(){console.log("codes:",this.codes.value()),w(()=>{if(console.log("effect 1"),this.state.showCountry.set(!1),this.codes.hasValue()&&!this.isDataLoaded){let e=this.codes.value().map(t=>({code:t.cca3,name:t.name.common,region:t.region,capital:t.capital[0]}));this.countryData.set(e),this.#t.objsort(this.countryData(),"name","asc"),this.isDataLoaded=!0}}),w(()=>{console.log("effect 2"),this.searchInput.set(this.searchInput())})}collectData(e){console.log("Data ",e),this.state.myCountry.set(e.code),this.state.showCountry.set(!0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-world"]],decls:2,vars:2,consts:[[2,"width","10%","text-align","justify","margin-right","auto","margin-left","auto"],[2,"width","150px"],["matInput","",3,"ngModelChange","ngModel"],[2,"text-align","justify","margin-right","auto","margin-left","auto"],["matButton","outlined",3,"click"]],template:function(t,c){t&1&&(d(0,Q,9,2),d(1,X,1,0,"app-country")),t&2&&(m(c.state.showCountry()?-1:0),r(),m(c.state.showCountry()?1:-1))},dependencies:[P,E,N,k,O,R,j,B,F,L,T,V,U],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}img[_ngcontent-%COMP%]{border:2px solid;width:20%;display:block;margin:5px auto}table[_ngcontent-%COMP%]{width:30%}.myInput[_ngcontent-%COMP%]{width:100px;border:3px solid #4947bf;border-radius:5px}@media screen and (max-width: 585px){img[_ngcontent-%COMP%]{border:1px solid;margin:2px;width:100%}table[_ngcontent-%COMP%]{width:90%}}"],changeDetection:0})};export{q as World};
