import{c as T}from"./chunk-NZRO3BFI.js";import"./chunk-VN3CQEPZ.js";import{b as w,c as V}from"./chunk-HOFRFDUX.js";import{g as A,h as P,i as k,k as O,l as L,m as $,n as j,o as B}from"./chunk-46BGSHF4.js";import{$ as g,$a as D,Aa as l,Ka as v,Pc as F,Qb as b,Qc as I,W as m,Za as p,_a as u,aa as h,ab as _,bb as y,cb as M,db as a,eb as i,gb as x,ib as C,jb as c,ka as d,tb as E,xb as o,yb as s}from"./chunk-YXBEA4Z2.js";var H=(n,t)=>t.code;function U(n,t){if(n&1&&(a(0,"mat-option",4),o(1),i()),n&2){let e=t.$implicit;M("value",e),l(),s(e)}}function q(n,t){n&1&&(a(0,"th"),o(1,"Region"),i())}function z(n,t){if(n&1&&(a(0,"td"),o(1),i()),n&2){let e=c().$implicit;l(),s(e.region)}}function G(n,t){if(n&1){let e=x();a(0,"tr")(1,"td"),o(2),i(),a(3,"td")(4,"button",6),C("click",function(){let f=g(e).$implicit,S=c(2);return h(S.collectData(f))}),o(5,"view"),i()(),a(6,"td"),o(7),i(),a(8,"td"),o(9),i(),p(10,z,2,1,"td"),i()}if(n&2){let e=t.$implicit,r=c(2);l(2),s(e.name),l(5),s(e.code),l(2),s(e.capital),l(),u(r.selection()==="All"?10:-1)}}function J(n,t){if(n&1&&(a(0,"table",5)(1,"caption")(2,"h3"),o(3,"List of country data"),i()(),a(4,"thead")(5,"tr")(6,"th"),o(7,"Name"),i(),a(8,"th"),o(9,"--"),i(),a(10,"th"),o(11,"Code"),i(),a(12,"th"),o(13,"Capital"),i(),p(14,q,2,0,"th"),i()(),a(15,"tbody"),_(16,G,11,4,"tr",null,H),i()()),n&2){let e=c();l(14),u(e.selection()==="All"?14:-1),l(2),y(e.myCountryData())}}function K(n,t){n&1&&(a(0,"h3"),o(1,"Please wait..."),i())}var N=class n{util=m(B);router=m(T);state=m(V);selection=d("All");myCountryData=d("");countryData=d("");result=[];regions=[];codes=w(()=>"https://restcountries.com/v3.1/all?fields=name,cca3,capital,flags,region");isDataLoaded=!1;myDate=Date.now();constructor(){b(()=>{this.codes.hasValue()&&(this.isDataLoaded||(this.result=this.codes.value().map(t=>({code:t.cca3,name:t.name.common,region:t.region,capital:t.capital[0],flag:t.flags.svg})),this.countryData.set(this.result),this.selection()==="All"&&this.myCountryData.set(this.countryData()),this.util.objsort(this.countryData(),"name","asc"),this.regions=Array.from(new Set(this.codes.value().map(t=>t.region))),this.regions.unshift("All"),console.log("regions",this.regions),console.log("countryData",this.countryData()),this.isDataLoaded=!0))})}onSelected(t){this.selection.set(t),this.selection()==="All"?this.myCountryData.set(this.countryData()):this.myCountryData.set(this.countryData().filter(e=>e.region==this.selection()))}collectData(t){console.log("Data ",t),this.state.myCountry.set(t.code),this.router.navigate(["country"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-styles"]],decls:11,vars:1,consts:[["reg",""],[2,"width","10%","text-align","justify","margin-right","auto","margin-left","auto"],["appearance","fill"],[3,"valueChange"],[3,"value"],[2,"width","40%","text-align","justify","margin-right","auto","margin-left","auto"],["matButton","outlined",3,"click"]],template:function(e,r){if(e&1){let f=x();a(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),o(3,"region"),i(),a(4,"mat-select",3,0),C("valueChange",function(){g(f);let R=E(5);return h(r.onSelected(R.value))}),_(6,U,2,2,"mat-option",4,D),i()()(),a(8,"p"),p(9,J,18,1,"table",5)(10,K,2,0,"h3"),i()}e&2&&(l(6),y(r.regions),l(3),u(r.codes.hasValue()?9:10))},dependencies:[I,F,k,P,A,O,j,$,L],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}img[_ngcontent-%COMP%]{border:2px solid;width:20%;display:block;margin:5px auto}@media screen and (max-width: 585px){img[_ngcontent-%COMP%]{border:1px solid;margin:2px;width:100%}}"],changeDetection:0})};export{N as Styles};
