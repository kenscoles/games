import{c as V}from"./chunk-2JGGQEA6.js";import{a as K}from"./chunk-U72QHV4Z.js";import{c as L}from"./chunk-K3QGD327.js";import{a as O,b as k,c as N,d as A,e as R,f as j,g as B,h as $,i as H,j as U,k as q,l as z,m as G,n as J}from"./chunk-LNIN4MSK.js";import{$ as d,$a as _,Ia as v,Mb as x,Nb as P,Nc as T,Oc as F,V as s,Xa as b,Ya as w,_ as m,_a as D,ab as y,bb as S,cb as t,db as i,eb as I,fb as C,hb as p,ia as u,ib as M,sb as E,wb as o,xb as g,ya as r}from"./chunk-3Z65R7ZE.js";var W=(n,e)=>e.code;function X(n,e){if(n&1&&(t(0,"mat-option",4),o(1),i()),n&2){let a=e.$implicit;S("value",a),r(),g(a)}}function Y(n,e){if(n&1){let a=C();t(0,"tr")(1,"td"),o(2),i(),t(3,"td")(4,"button",8),p("click",function(){let c=m(a).$implicit,h=M(2);return d(h.collectData(c))}),o(5,"view"),i()(),t(6,"td"),o(7),i()()}if(n&2){let a=e.$implicit;r(2),g(a.name),r(5),g(a.region)}}function Z(n,e){if(n&1&&(t(0,"table",7)(1,"caption")(2,"h3"),o(3,"List of country data"),i()(),t(4,"thead")(5,"tr")(6,"th"),o(7,"Name"),i(),I(8,"th"),t(9,"th"),o(10,"Region"),i()()(),t(11,"tbody"),_(12,Y,8,2,"tr",null,W),i()()),n&2){let a=M();r(12),y(a.filtered())}}function ee(n,e){n&1&&(t(0,"h3"),o(1,"Please wait..."),i())}var Q=class n{#e=s(G);router=s(V);state=s(L);#t=s(K);selection=u("All");countryData=u("");result=[];regions=[];codes=this.#t.codes;isDataLoaded=!1;searchInput=u("");debounced=J(this.searchInput,1e3);filtered=P(()=>this.countryData().filter(e=>e.name.toLowerCase().includes(this.debounced().toLowerCase())||e.region.toLowerCase().includes(this.debounced().toLowerCase())));constructor(){console.log("codes:",this.codes.value()),x(()=>{this.codes.hasValue()&&(this.isDataLoaded||(this.result=this.codes.value().map(e=>({code:e.cca3,name:e.name.common,region:e.region,capital:e.capital[0]})),this.countryData.set(this.result),this.#e.objsort(this.countryData(),"name","asc"),this.regions=Array.from(new Set(this.codes.value().map(e=>e.region))),this.regions.unshift("All"),this.isDataLoaded=!0))}),x(()=>{this.searchProduct(this.debounced())})}onSelected(e){this.selection.set(e),this.selection()==="All"?this.searchInput.set(""):this.searchInput.set(e)}collectData(e){console.log("Data ",e),this.state.myCountry.set(e.code),this.router.navigate(["country"])}searchProduct(e){this.searchInput.set(e)}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=v({type:n,selectors:[["app-styles"]],decls:15,vars:2,consts:[["reg",""],[2,"width","10%","text-align","justify","margin-right","auto","margin-left","auto"],["appearance","fill",2,"width","150px"],[3,"valueChange"],[3,"value"],[2,"width","150px"],["matInput","",3,"ngModelChange","ngModel"],[2,"text-align","justify","margin-right","auto","margin-left","auto"],["matButton","outlined",3,"click"]],template:function(a,l){if(a&1){let c=C();t(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),o(3,"region"),i(),t(4,"mat-select",3,0),p("valueChange",function(){m(c);let f=E(5);return d(l.onSelected(f.value))}),_(6,X,2,2,"mat-option",4,D),i()(),t(8,"mat-form-field",5)(9,"mat-label"),o(10,"Search"),i(),t(11,"input",6),p("ngModelChange",function(f){return m(c),d(l.searchInput.set(f))}),i()()(),t(12,"p"),b(13,Z,14,0,"table",7)(14,ee,2,0,"h3"),i()}a&2&&(r(6),y(l.regions),r(5),S("ngModel",l.searchInput()),r(2),w(l.codes.hasValue()&&l.filtered()!==""?13:14))},dependencies:[F,T,B,j,R,H,$,z,q,U,A,O,k,N],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}img[_ngcontent-%COMP%]{border:2px solid;width:20%;display:block;margin:5px auto}table[_ngcontent-%COMP%]{width:30%}@media screen and (max-width: 585px){img[_ngcontent-%COMP%]{border:1px solid;margin:2px;width:100%}table[_ngcontent-%COMP%]{width:90%}}"],changeDetection:0})};export{Q as Styles};
